# =============================================================================
# AI_AMOOZ – Production Environment Variables
# =============================================================================
# Copy this file to backend/.env and fill in all REQUIRED values.
# Generate a secret key with:
#   python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# =============================================================================

# ─── Django (REQUIRED) ───
DEBUG=False
DJANGO_SECRET_KEY=CHANGE-ME-TO-A-RANDOM-SECRET-KEY
ALLOWED_HOSTS=your-domain.com,www.your-domain.com

# ─── Database (REQUIRED) ───
# In docker-compose.prod.yml these are overridden; set them for non-Docker deploys.
DATABASE_URL=postgresql://ai_amooz:STRONG_DB_PASSWORD@postgres:5432/ai_amooz

# ─── Redis / Celery ───
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1
CHAT_REDIS_URL=redis://redis:6379/0

# ─── AI / LLM APIs (REQUIRED) ───
AVALAI_API_KEY=your-avalai-api-key
AVALAI_BASE_URL=https://api.avalai.ir
GEMINI_API_KEY=your-gemini-api-key
MODEL_NAME=models/gemini-2.5-flash
TRANSCRIPTION_MODEL=models/gemini-2.5-flash
REWRITE_MODEL=models/gemini-2.5-flash
IMAGE_MODEL=models/gemini-3-pro-image-preview
EMBEDDING_MODEL_NAME=models/gemini-embedding-001
MODE=avalai
GENAI_HTTP_TIMEOUT=1000

# ─── Transcription ───
TRANSCRIBE_CHUNK_SECONDS=20
FRAME_MAX_FRAMES_FOR_MODEL=40
FRAME_HARD_CAP=16
MAX_TOTAL_FRAME_BYTES_MB=3
FRAME_EXTRACTION_FPS=0.25

# ─── SMS (Mediana) (REQUIRED for student notifications) ───
MEDIANA_API_KEY=your-mediana-api-key

# ─── Pipeline ───
CLASS_PIPELINE_ASYNC=True

# ─── CORS / CSRF (REQUIRED — set to your frontend domain) ───
CORS_ALLOW_ALL_ORIGINS=False
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOW_CREDENTIALS=True
CSRF_TRUSTED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# ─── Security (production defaults — override only if needed) ───
# SECURE_SSL_REDIRECT=False — K8s ingress handles SSL. Leave False.
SECURE_SSL_REDIRECT=False
SECURE_HSTS_SECONDS=31536000

# ─── Gunicorn ───
PORT=8000
GUNICORN_WORKERS=4
GUNICORN_TIMEOUT=300
GUNICORN_WORKER_CLASS=gthread
GUNICORN_THREADS=4
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=50

# ─── Throttle ───
THROTTLE_RATE_ANON=30/minute
THROTTLE_RATE_USER=200/minute

# ─── Upload Limits ───
MAX_UPLOAD_MB=500
TRANSCRIPTION_MAX_UPLOAD_MB=500
